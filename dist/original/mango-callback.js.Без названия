function MangoWidget(e){function t(e){var t=e.styles.fastCallback||{},n=!e.styles.copyright;t.flags=V.flags,t.policy=e.styles.policy,"fast-callback"==e.workMode&&V.element.find(".widget-wrapper").first().hide(),I().done(function(){if(Mango.Callback.FastCallbackWidget.isFastCallbackAvailable()||"fast-callback"==e.workMode){V.fastCallback=new Mango.Callback.FastCallbackWidget(jQuery.parseJSON(e.fast_callback),t,e.translate,V.element),V.fastCallback.splitText=m,V.fastCallback.init(e.styles,n);var a=V.element;V.element=V.fastCallback.element,A(),(V.element.hasClass("dark-cerulean-color")||V.element.hasClass("graphite-black-color"))&&V.element.find(".widget-wrapper").hasClass("selected-button")&&V.element.find(".currentCountry>.selectedCountry .triangle").addClass("dark"),V.element=a,"fast-callback"==e.workMode&&V.fastCallback.showWidget()}})}function n(e){var t=V.element.find(".widget-wrapper");t.addClass("common-window"),V.element.hasClass("selected-label")&&V.element.css({right:"-545px"}),V.element.find(".widget-callfromsite").hide();var n=V.element.find(".widget-callfromsite-not-work");switch(e){case 1:case 2:n.find(".title-widget").text(""),n.find(".text-widget").text(L.translate.widget_call_error+" ("+e+")");break;case 3:n.find(".title-widget").text(""),n.find(".text-widget").text(L.translate.widget_not_supported);break;case 4:n.find(".title-widget").text(""),n.find(".text-widget").text(L.translate.widget_not_supported_flash)}V.widget_show_error=!0,n.show()}function a(e,t){j(e.widgetStatus)&&(T(),setTimeout(function(){f(e),t()},200)),H(document).on("click",function(e){var t=V.element.find(".changeCountry"),n=V.element.find(".currentCountry>.selectedCountry");0===V.element.find(".selectedCountry").has(e.target).length&&(t.css("display","none"),n.removeClass("showCountriesList"))}),V.element.on("click",".currentCountry .selectCountryList > .selectCountry",x),V.element.on("click",".button-call",function(e){var t=H(e.target),n=t.prev().find(".call-input"),a=n.parent().attr("data-content").split("(")[0].replace(/\+/g,"")+n.val();r(a,t)}),V.element.on("click",".button-widget-open",function(){V.element.find(".widget-wrapper:not(.fast-callback)").hasClass("widget-show")?V.setStatus("close"):V.setStatus("open",e)}),V.element.on("change",".select-day-week",function(){H(".widget-start-time").html(g(H(this).val(),w(L.days))),H(".widget-end-time").html(g(H(this).val(),w(L.days)))}),V.element.on("click",".close-popup",function(e){var t=H(e.target),n=t.parents(".widget-wrapper");n.hasClass("fast-callback")?V.fastCallback.closeWidget():V.setStatus("close")})}function o(e,t){var n;switch(t){case 2:n=30;break;case 3:n=40;break;case 4:n=50;break;case 5:n=60;break;case 6:n=70}return e.animate({"padding-left":n+"px"},100).attr("data-padding",n),n}function i(e,t,n,a){var i=o(e,a),l=n.replace(/[\(\)\s\-]/g,"").length*t,s=null!==n.match(/[\(\)\s\-]/g)?n.match(/[\(\)\s\-]/g).length:0,r=0==s?0:l/(s*t)+5,d=l+s*r,c=parseInt(e.css("width"))+i+"px",u=i+d+"px";c!==u&&e.animate({width:u},100)}function l(){return"selected-dynamic"==L.styles.formatCall}function s(){var e=V.element.find(".call-input"),t=V.element.attr("data-number");!e.val()&&t&&(t=t.replace(/[()\-\+\s]/g,""),t.length>10&&(t=t.substr(t.length-10)),e.val(t),Q&&Q.maskPattern(Q.opts.pattern))}function r(e,t){var n=t.parents(".widget-wrapper"),a=n.hasClass("fast-callback"),o=n.find(".currentCountry>.selectedCountry"),i=o.attr("data-index"),s=V.allowedCountries[i].phone_code.length;e=e.replace(/[()\-\s]/g,""),!V.type&&e.length-s>=V.allowedCountries[i].min&&V.allowedCountries[i].max>=e.length-s&&(l()&&"not-work"==L.workMode?C(u.bind(null,e,t)):u(e,t),a&&V.fastCallback.timerStage(),V.fastCallback&&V.fastCallback.orderComplete())}function d(e){if(L.useGaEvents){var t=window.GoogleAnalyticsObject;if(t){var n=window[t];if(n){var a="not-work"!=L.workMode?"call order work":"call order not work",o=n.getAll()||[];o.forEach(function(e){e.send("event","callback button","call order",""),e.send("event","callback button",a,"")})}}}}function c(e){if(!Mango||!Mango.CallTracking)return"";if(void 0===window.atob)return"";var t=[],n=Mango.modules.getModule("calltracking");if(!n||!n.widgets)return"";t=n.widgets;var a=Object.keys(t);if(0===a.length)return"";var o=+atob(e),i=a.filter(function(e){var n=t[e];return n&&n.numbers&&n.numbers.length&&n.settings&&n.settings.callbacks&&n.settings.callbacks.some(function(e){return e===o})}).map(function(e){return{id:e,number:t[e].numbers[0].number}});if(0===i.length)return"";var l={uid:Mango.session.getUserId(),sid:Mango.session.getSessionId(),widgets:i};return JSON.stringify(l)}function u(e,t){var n=t.parents(".widget-wrapper").find(".widget-start-time").val()||0;V.setStatus("waiting");var a={number:encodeURIComponent(e),dateStart:parseInt(n)},o=c(V.callbackButtonId);o&&(a.calltracking=o);var i=V.host+"widget/order-call/"+V.callbackButtonId+"?callback=?";return H.getJSON(i,a,function(t){V.setStatus("success"),d(e)})}function g(e,t){var n="";return H.each(t,function(t,a){a.date==e&&H.each(a.times,function(e,t){var a=new Date(1e3*t),o=new Date(1e3*t+18e5),i=("0"+a.getHours()).substr(-2),l=("0"+a.getMinutes()).substr(-2),s=("0"+o.getHours()).substr(-2),r=("0"+o.getMinutes()).substr(-2);n+='<option value="'+t+'">'+i+":"+l+" - "+s+":"+r+"</option>"})}),n}function w(e){var t=[],n=new Date;return H.each(e,function(e,a){var o=[],i=new Date(1e3*a.date+6e4*n.getTimezoneOffset());H.each(a.times,function(e,t){var a=new Date(1e3*t+18e5);i.setHours(a.getHours()),i.setMinutes(a.getMinutes()),i>=n&&o.push(t)}),o.length>0&&t.push({date:a.date,times:o})}),t}function p(e){function t(e,t){var n=new Date(1e3*t.date+6e4*i.getTimezoneOffset());o+='<option value="'+t.date+'">'+n.getDate()+" "+L.translate["month_"+(n.getMonth()+1)]+"</option>"}function n(e){var t,n=new Date,a=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];return n.setDate(i.getDate()+1),e.toDateString()==i.toDateString()?L.translate.today:n.toDateString()==e.toDateString()?L.translate.tomorrow:(t=a[e.getDay()],t="in_"+t.toLowerCase().trim(),L.translate[t])}function a(e,t){var a=new Date(1e3*t.date+6e4*i.getTimezoneOffset()),l=n(a);o+='<option value="'+t.date+'">'+l}var o="",i=new Date;return"work"==L.workMode?H.each(e,t):H.each(e,a),o}function f(e){function t(){if(!n.formatView){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;T.css("top",Math.max(0,(e-H(T).outerHeight())/2)+"px")}if(!n.formatLocation){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;T.css("left",Math.max(0,(t-H(T).outerWidth())/2)+"px")}}var n=H.extend({},e.styles),a=w(e.days);if(window.location.search)for(var o=window.location.search.substring(1).split("&"),i=0;i<o.length;i++){var s=o[i].split("=");if("type"==s[0]){n.workMode=s[1];break}}var r="",d=p(a);a[0]&&(r=g(a[0].date,a)),void 0===n.pattern&&(n.pattern={}),n.pattern&&void 0===n.pattern.pattern&&(n.pattern.pattern=""),l()&&(n.formatCall="selected-label",n.formatLocation||(n.formatLocation="right-x"));var c={basicColor:n.colorScheme.basic+"-color",additionalColor:n.colorScheme.additional+"-additional-color ",opacity:n.colorScheme.opacity},u=["widget-wrapper","mng-wgt","common-window","mng-wgt-index",n.copyright||"",n.formatView||"",n.formatLocation||"",c.basicColor||"",c.additionalColor||"",c.opacity||"",n.formWidget||"",n.pattern.pattern||"",n.formatCall||""].join(" "),f='<div class="'+u+'" style="position:fixed;"><div class="widget-wrapper__center"><div class="widget-content">',m=V.currentCountry,h="",y='<ul class="currentCountry">';m["default"]?V.allowedCountries.length>0?(y+='<li class="selectedCountry" data-country="'+V.allowedCountries[0].country_code+'" data-index="'+(m.ind||0)+'"><div class="triangle"></div><img class="flag flag-'+V.allowedCountries[0].country_code+'" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/></li>',h+='<span class="box-phone-span-input '+V.allowedCountries[0].country_code+'-box-phone-span-input" data-content="+'+V.allowedCountries[0].phone_code+'"><input placeholder="'+V.allowedCountries[0].placeholder+'" class="call-input" mask="'+V.allowedCountries[0].mask+'" restrict="reject" clean="true"/></span>'):(y+='<li class="selectedCountry" data-country="'+e.locale+'" data-index="0"><img class="flag flag-'+e.locale+'" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/></li>',h+='<span class="box-phone-span-input '+e.locale+'-box-phone-span-input" data-content="+'+m.phone_code+'"><input placeholder="'+m.placeholder+'" class="call-input" mask="'+m.mask+'" restrict="reject" clean="true"/></span>'):(y+='<li class="selectedCountry" data-country="'+e.locale+'" data-index="'+(m.ind||0)+'">'+(V.allowedCountries.length>0?'<div class="triangle"></div>':"")+'<img class="flag flag-'+e.locale+'" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/></li>',h+='<span class="box-phone-span-input '+e.locale+'-box-phone-span-input" data-content="+'+m.phone_code+'"><input placeholder="'+m.placeholder+'" class="call-input" mask="'+m.mask+'" restrict="reject" clean="true"/></span>'),y+='<li class="changeCountry"><ul class="selectCountryList">',m["default"]||(y+='<li class="selectCountry userCountry" data-country="'+m.country_code+'" data-code="+'+m.phone_code+'" data-mask="'+m.mask+'" data-placeholder="'+m.placeholder+'" data-index="'+m.ind+'"><div class="selectCountryTable"><div class="selectCountryTableCell"><img class="flag flag-'+m.country_code+'" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/></div><div class="countryName">'+("de"===e.locale?m.country_de:"ru"===e.locale?m.country_ru:m.country_en)+'</div><div class="countryCode">+'+m.phone_code+"</div></div></li>");for(var v=0;v<V.allowedCountries.length;v++){var k=V.allowedCountries[v].country_code,C=V.allowedCountries[v].phone_code,x=V.allowedCountries[v].mask,_=V.allowedCountries[v].placeholder;y+='<li class="selectCountry" data-country="'+k+'" data-code="+'+C+'" data-mask="'+x+'" data-placeholder="'+_+'" data-index="'+v+'"><div class="selectCountryTable"><div class="selectCountryTableCell"><img class="flag flag-'+k+'" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/></div><div class="countryName">'+("de"===e.locale?V.allowedCountries[v].country_de:"ru"===e.locale?V.allowedCountries[v].country_ru:V.allowedCountries[v].country_en)+'</div><div class="countryCode">+'+C+"</div></div></li>"}y+="</ul></li></ul>",y+=h,n.workMode&&"not-work"==n.workMode||!n.workMode&&"not-work"==e.workMode?(f+='<h5 class="title-widget">'+n.textWidget.firstText+'</h5><p class="text-widget">'+n.textWidget.secondText+'</p><div class="box-select-group"><div class="select-list"><div class="select-item"><select class="select-day-week">'+d+'</select></div><div class="select-item"><select class="select-time widget-start-time">'+r+'</select></div></div></div><div class="box-phone-number">'+y+'<div class="button-call button-widget"></div></div>',""===n.policy&&(f+='<div class="'+("selected-dynamic"!==L.styles.formatCall?"text-policy":"text-policy-dynamic")+'">'+n.textWidget.policyText+"</div>")):(f+='<h5 class="title-widget">'+n.textWidget.workTitle+'</h5><p class="text-widget">'+n.textWidget.workText+'</p><div class="box-phone-number">'+y+'<div class="button-call button-widget"></div></div>',""===n.policy&&(f+='<div class="'+("selected-dynamic"!==L.styles.formatCall?"text-policy":"text-policy-dynamic")+'">'+n.textWidget.policyText+"</div>")),V.flags=y,f+="</div>",f+='<div class="thanks-content"><h5 class="title-widget">'+e.translate.thanks+'</h5><p class="text-widget">'+e.translate.order_complete+'</p></div><div class="wait-content"><div class="clock"></div><h5 class="title-widget">'+e.translate.wait+'</h5><p class="text-widget">'+e.translate.order_waiting+"</p></div>",f+='</div><div class="close-popup"></div><button class="button-widget-open">'+n.textButtonWidget.firstText+'</button><a href="'+e.translate.widget_link_url+'" class="technology" target="_blank">'+e.translate.widget_link_text+"</a></div>";var M=V.element.find(".mng-overlay");if(0==M.length&&(f+='<div class="mng-overlay"></div>'),V.element.find(".widget-wrapper").remove(),V.element.append(f),navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1){var T=H("#mango-widget").find(".widget-wrapper");H(function(){H(window).resize(function(){t()}),setTimeout(function(){T.css("-webkit-transform","translate(0,0)"),t()},300)})}switch(e.workMode){case"work":V.element.find(".widget-callfromsite").show();break;default:V.element.find(".widget-wrapper").addClass("common-window"),V.element.find(".widget-callback-not-work").show()}A(e),l()&&b(e)}function m(e,t){var n,t=t||5,a=e.length,o=13;return a<o?e:(e=e.replace("<br>"," "),n=e.indexOf(" ",Math.ceil(a/2)-t),e.substring(0,n)+"<br>"+e.substring(n+1,a))}function h(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,n=e.match(t);return!(!n||11!=n[7].length)&&n[7]}function y(e){function t(e,t){"undefined"!=typeof YT&&(G[e]=new YT.Player(e,{videoId:t,playerVars:{loop:1,autoplay:1,autohide:1,controls:0,showinfo:0,disablekb:1,modestbranding:1,rel:0,cc_load_policy:1,iv_load_policy:3},events:{onReady:function(t){t.target.mute(),V.element.find(".widget-show").length&&v(G[e]),t.target.playVideo()},onStateChange:function(e){e.data==YT.PlayerState.ENDED&&e.target.playVideo()}}}))}function n(){Object.keys(G).length?Object.keys(G).forEach(function(t){G[t].loadVideoById(e)}):(t("mango-video-container",e),t("mango-video-thanks-container",e),t("mango-video-wait-container",e))}var a=document.createElement("script"),o=document.getElementsByTagName("script")[0];V.element.find(".widget-wrapper");a.id="youtube-api",a.src="https://www.youtube.com/player_api",e&&(document.getElementById(a.id)||o.parentNode.insertBefore(a,o),q=function(e){var e=e||100;setTimeout(function(){Object.keys(G).forEach(function(e){v(G[e])})},e)},H(window).resize(q),window.onYouTubeIframeAPIReady!=n?window.onYouTubeIframeAPIReady=n:n())}function v(e){var t=e.getIframe();if(t){var n=t.parentNode,a=n.offsetWidth,o=n.offsetHeight,i=16/9,l=Math.round(a/i),s=Math.round(o*i),r=-Math.round(l/2-o/2);o>a&&(t.style.width=s+"px",t.style.height=o+"px",r=-Math.round(s/2-a/2),t.style.marginLeft=r+"px",t.style.marginTop="0px"),o<=a&&r>=0&&(t.style.height=o+"px",t.style.width=a+"px",t.style.marginTop="0px",t.style.marginLeft="0px"),o<=a&&r<0&&(t.style.width=a+"px",t.style.height=l+"px",t.style.marginTop=r+"px",t.style.marginLeft="0px")}}function k(){return"not-work"!=L.workMode}function b(e){function t(){var e=C.date,t=C.time.split("-"),n=t[0].trim(),a=t[1].trim(),o=L.translate.dynamic_button_thank_you_not_work;return o.replace("{timeStart}",n).replace("{timeEnd}",a).replace("{date}",e)}function n(){var e=H("body");if(!i.hasClass("widget-show")||e.width()>650)return void i.css("top","auto");var t=H(window).height()>window.screen.height?window.screen.height:H(window).height(),n=Math.round(t/2);i.css("top",n+"px")}function a(){L.styles.pattern.useVideo&&0===Object.keys(G).length?y(h(L.styles.pattern.linkVideo)):L.styles.pattern.useVideo&&Object.keys(G).length&&Object.keys(G).forEach(function(e){G[e].playVideo()})}function o(){Object.keys(G).forEach(function(e){G[e].stopVideo()})}var i=V.element.find(".widget-wrapper"),s=H.extend({},e.styles),r=i.find(".widget-content"),d=i.find(".thanks-content"),c=i.find(".wait-content"),u=0===location.pathname.indexOf("/widget/callback/");u&&"?type=work"==location.search?L.workMode="work":u&&"?type=not-work"==location.search&&(L.workMode="not-work"),void 0===s.textDynamicWidget&&(s.textDynamicWidget={}),void 0===s.textNotWorkingDynamicWidget&&(s.textNotWorkingDynamicWidget={});var g=s.textDynamicWidget.firstText||"",w=s.textNotWorkingDynamicWidget.firstText||"",p=s.textDynamicWidget.secondText||"",f=s.textDynamicWidget.thirdText||L.translate.dynamic_button_header;i.removeClass("selected-label").addClass("selected-dynamic"),i.find(".button-widget-open").text(""),r.find(".title-widget").text(f),r.find(".text-widget").html(m(k()?g:w)),r.find(".box-select-group").hide(),d.find(".text-widget").text(e.translate.dynamic_button_thank_you),i.find(".button-call").text(p),V.element.find(".mng-overlay").hide(),i.find(".call-input").height(35),s.pattern&&s.pattern.linkVideo&&s.pattern.useVideo&&(r.prepend('<div class="background-video"><div id="mango-video-container"></div></div>'),d.prepend('<div class="background-video"><div id="mango-video-thanks-container"></div></div>'),c.prepend('<div class="background-video"><div id="mango-video-wait-container"></div></div>')),H(window).resize(n),V.element.on("statusChange",function(e,s){l()&&(q(),n(),i.hasClass("thanks")&&"close"==s&&i.removeClass("thanks"),"success"!=s||k()||d.find(".text-widget").text(t()),"open"==s&&a(),"close"==s&&o())})}function C(e){var t=V.element.find(".widget-wrapper:not(fast-callback) .button-call"),n=V.element.find(".box-select-group"),a=V.element.find(".box-phone-number");return n.is(":visible")?void e():(t.text(L.translate.dynamic_button_not_work_button),n.css("display","inline-block"),V.element.find(".widget-content .widget-text").text(L.translate.dynamic_button_not_work_text),a.find(".box-phone-span-input").hide(),a.find(".currentCountry").hide(),q(),void t.off().on("click",function(){var t=V.element.find(".select-day-week option:selected").text(),n=V.element.find(".select-time option:selected").text();C.date=t,C.time=n,e()}))}function A(e){var t,n;V.currentCountry["default"]&&V.allowedCountries.length>0?(t={mask:V.allowedCountries[0].mask.replace(/\?/g,""),placeHolder:V.allowedCountries[0].placeholder},n=V.allowedCountries[0].phone_code.length+1):(t={mask:V.currentCountry.mask.replace(/\?/g,""),placeHolder:V.currentCountry.placeholder},n=V.currentCountry.phone_code.length+1);var a=V.element.find(".call-input"),o=12.5;Q=VMasker(a[0]),Q.maskPattern(t.mask),a.attr("placeholder",t.placeHolder),i(a,o,t.placeHolder,n),(V.element.find(".widget-wrapper").hasClass("dark-cerulean-color")||V.element.find(".widget-wrapper").hasClass("graphite-black-color"))&&V.element.find(".widget-wrapper").hasClass("selected-button")&&V.element.find(".currentCountry>.selectedCountry .triangle").addClass("dark"),V.allowedCountries.length>1?V.element.find(".selectedCountry").on("click",function(){H(this).toggleClass("showCountriesList"),H(this).hasClass("showCountriesList")?(H(".changeCountry").css("display","block"),V.allowedCountries.length<5&&H(".changeCountry").css("height",31*V.allowedCountries.length)):H(".changeCountry").css("display","none")}):V.element.find(".currentCountry>.selectedCountry>.triangle").css("display","none")}function x(e){var t=12.5,n=H(e.target),a=n.parents(".widget-wrapper"),o=n.hasClass("selectCountry")?n:n.parents(".selectCountry"),l=o.parents(".box-phone-number"),s=l.find(".call-input"),r=l.find(".selectedCountry"),d=r.find("img"),c=o.parents(".changeCountry"),u=o.attr("data-code"),g=o.attr("data-placeholder"),w=o.attr("data-index"),p=o.attr("data-country");i(s,t,g,u.length),d.removeClass("flag-"+r.attr("data-country")),r.attr("data-country",p),r.attr("data-index",w),d.addClass("flag-"+p),a.find(".box-phone-span-input").attr("data-content",u),s.val(""),s.attr("mask",o.attr("data-mask"));var f={mask:o.attr("data-mask").replace(/\?/g,""),placeHolder:o.attr("data-placeholder")};Q=VMasker(s[0]),Q.maskPattern(f.mask),s.attr("placeholder",f.placeHolder),c.css("display","none"),r.removeClass("showCountriesList"),q(200)}function _(e){var t=new Date,n=t.toISOString().substring(0,10),a=e.nonWorkingDaysException||[];if(-1!==a.indexOf(n))return!1;var o=new Date(e.workInterval.start),i=new Date(e.workInterval.finish),l=e.workInterval.lunchStart?new Date(e.workInterval.lunchStart):null,s=e.workInterval.lunchFinish?new Date(e.workInterval.lunchFinish):null;return l&&s?o<=t&&t<i&&!(l<=t&&t<s):o<=t&&t<i}function M(e){var t=_(e);return"work"!==e.workMode||t?!("not-work"!==e.workMode||!t)&&(e.workMode="work",!0):(e.workMode="not-work",!0)}function T(){H("<link>",{rel:"stylesheet",type:"text/css",href:V.host+"css/widget.css"}).appendTo("head"),H("<link>",{rel:"stylesheet",type:"text/css",href:V.host+"css/flags.css"}).appendTo("head")}function j(e){switch(e){case 1:case 2:return V.element.find("#mango-widget-btn").attr("onclick",'alert("'+L.translate.widget_unavailable+'"); false;'),!1;case 3:return E(),!1}return!0}function D(e){void 0===window.VMasker?B("js/vanilla-masker.js",function(){e()}):e()}function I(e){var e=e||"widgets/mango-fast-callback.js",t=document.createElement("script"),n=H.Deferred();return t.setAttribute("type","text/javascript"),t.setAttribute("src",V.host+e),t.onerror=n.reject.bind(n),t.onload=n.resolve.bind(n),(document.getElementById(V.id)||document.documentElement).appendChild(t),n=n.promise(),n.fail(function(){E()}),n}function S(e){function t(e,t){if(e==t)return 0;for(var n=e.split("."),a=t.split("."),o=Math.min(n.length,a.length),i=0;i<o;i++){if(parseInt(n[i])>parseInt(a[i]))return 1;if(parseInt(n[i])<parseInt(a[i]))return-1}return n.length>a.length?1:n.length<a.length?-1:0}function n(e){var n;return"function"==typeof e&&(n=e(),"object"==typeof n&&void 0!==n.jquery&&t(n.jquery,z)>=0)}if(void 0===window.jQuery){var a=window.$;B("js/jquery-1.7.2.js",function(){H=window.jQuery.noConflict(),window.$=a,(window.Mango=window.Mango||{}).jQuery=H,e()})}else if(n(window.jQuery))H=window.jQuery,(window.Mango=window.Mango||{}).jQuery=H,e();else{var o=window.jQuery.noConflict();B("js/jquery-1.7.2.js",function(){H=window.jQuery.noConflict(),window.jQuery=window.$=o,(window.Mango=window.Mango||{}).jQuery=H,e()})}}function O(e){void 0===H.Storage?B("js/jquery.storage.js",function(){H.Storage=window.jQuery.Storage,e()}):e()}function B(e,t){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",V.host+e),n.readyState?n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||t()}:(n.onload=t,n.onerror=E),(document.getElementById(V.id)||document.documentElement).appendChild(n)}function E(e){var e=!(!e&&"object"==typeof e)&&e,t="";e&&(t="("+e+")"),V.element?V.element.find(".button-widget-open").attr("onclick",'alert("'+V.errorMessage+t+'"); false;'):V.elem.querySelector(".button-widget-open").setAttribute("onclick",'alert("'+V.errorMessage+t+'"); false;')}function W(){return window.location.href.indexOf("autoOpen=1")>0}this.host=e.host,this.id=e.id,this.elem=e.elem,this.errorMessage=e.message,this.callbackButtonId=!1,this.type="",this.allowedCountries=[],this.currentCountry=[],this.fastCallback=null,this.closeTimeout=null,this.autoCloseTimeout=null,this.widget_show_error=!1,this.connection=!1;var H,L,Q,V=this,N=!1,R=6e4,P=5e3,z="1.7.2",G={};this.initWidget=function(){S(function(){D(function(){O(function(){V.elem?V.element=H(V.elem):V.element=H("#"+V.id);var e=V.element.data("settings");V.callbackButtonId=e.id;var n=new Date,o=V.host+"widget/get-callback-widget/"+e.id+"?callback=?&timeOffset="+n.getTimezoneOffset()+"&type="+e.type+"&serv="+e.srv;H.support.cors=!0,H.getJSON(o,e,function(n){L=n,n.widget_id=e.id;var o=V.element.attr("data-optionsView");o&&(n.styles=jQuery.parseJSON(o)),V.currentCountry=n.currentCountry,V.allowedCountries=n.allowedCountries,a(n,function(){N=!0,(e.type||W())&&V.setStatus("open",n),V.type=e.type||null,(n.use_tracking||"fast-callback"==n.workMode)&&t(n)})})})})})},this.setStatus=function(e,t){if(!V.type&&N){var a=V.element.find(".widget-wrapper:not(.fast-callback)"),o=V.element.find(".widget-wrapper.fast-callback.widget-show");switch(e){case"open":!a.hasClass("widget-show")&&M(t)&&(f(t),a=V.element.find(".widget-wrapper")),setTimeout(function(){a.toggleClass("widget-show"),a.removeClass("thanks"),a.removeClass("wait"),a.hasClass("widget-show")&&a.hasClass("selected-button")&&V.element.find(".mng-overlay").show().animate({opacity:"0.5"},500)},0),V.autoCloseTimeout=setTimeout(function(){V.setStatus("close")},R),s();break;case"success":a.addClass("thanks"),a.removeClass("wait"),V.closeTimeout=setTimeout(function(){V.setStatus("close"),o||V.element.find(".mng-overlay").animate({opacity:"0"},500).hide(1)},P);break;case"close":a.removeClass("widget-show"),clearTimeout(V.closeTimeout),clearTimeout(V.autoCloseTimeout),V.element.find(".mng-overlay").animate({opacity:"0"},500).hide(1);break;case"waiting":a.addClass("wait"),a.removeClass("thanks");break;case"connection-failed":n(1),V.element.find(".mng-overlay").animate({opacity:"0"},500).hide(1)}setTimeout(function(){V.element.trigger("statusChange",[e])},0)}};var q=function(){}}